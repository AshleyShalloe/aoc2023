<!DOCTYPE html>
<html lang="en">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="../res/main.css">
    <script type="text/javascript" src="../res/main.js"></script>
    <title>Advent of Code // Day 12</title>
    <link rel="icon" href="../favicon.png" />
</head>

<body>

    <h2>1</h2>
    <input id="fancyAnswer1" disabled></input>
    <h2>2</h2>
    <input id="fancyAnswer2" disabled></input>

</body>
<script>
    'use strict'

    const testInput = `???.### 1,1,3
.??..??...?##. 1,1,3
?#?#?#?#?#?#?#? 1,3,1,6
????.#...#... 4,1,1
????.######..#####. 1,6,5
?###???????? 3,2,1`

    const puzzleInput = `#???#?#?.?##?#?.#. 7,5,1
??#?#?#????.????#? 6,2,1,1
.#????????.??? 5,1,1,1
?#.??.??????? 1,1,1,2
#.???#?##.??.????. 1,1,1,2,2,1
?????????.??? 7,1
?#?.?#????# 1,2,3
.????..??#?. 3,2
???..?#?.##???##.?#? 2,2,3,2,2
??#?.#..???? 3,1,2
??##?#???????? 5,1,1
#????????#??#?? 1,10
.?????????? 4,1
.??#?##???#???## 6,1,1,4
?#?#?.?#??.??????#? 4,1,4,2
?##?#??#???? 7,1
##???.?????. 2,1,1,1
.???....??#?. 1,4
??#.#??.#.??#??? 1,2,1,5
.???##?#?#???.#. 1,8,1
?.??#?..#?.?? 1,2,1,1
..??#????????##? 5,4
?#?#???#?#? 4,1,2
??#??????## 3,2,2
.??##??????#?????? 3,5
?##.?.????????.?.?#. 2,1,1,4,1,2
.?#?#?.???? 4,4
???.??#??????##? 3,4,6
????#??????#? 3,1
##?????#?#???.?. 11,1,1
#?#??.???#?#??.?#??? 1,2,1,3,1,5
???#??#?????????? 1,1,1,8
#???#??.#??? 1,1,1,4
?????.?.?? 1,2,1
#??#?#?????????#. 6,1,1,3
????.#?.?#.. 1,2,1
???????.#.### 1,3,1,3
???#??.??#? 5,1
#?.?##?#??#??? 1,7,2
??????#.?????.?. 5,1,2,1
??#????????????# 1,2,1,2,1
????#?#?????#? 1,4,2,2
.##?.??#?#. 2,1,1
?.###.???# 3,1
?#.?????#??.??? 1,8,1
?##?.??#???? 4,5
?#?.??.?#??. 1,2,3
?#????.?#???????#?? 2,1,4,1,1,3
.??##???????#?.??? 12,1
?#??.????.#??#..? 4,1,1,1,1
?????????#?#?.# 2,1,2,1,1
#??#??#.?#?#???? 5,1,4,2
?####???????..?. 11,1
????#?#??#. 2,3,2
???????#??????#?? 3,7,2
?????##?##.???? 10,2
???????#????#?#?#### 1,1,1,1,10
???????.??#???#? 2,1,1,1,3
???#.?#??????. 1,6
??##?##??????????.?? 14,1
?#?##????#?.? 4,2
?????.#?#?. 2,4
..???#??.??????.? 4,2
#??##??#?.#.?..# 1,5,1,1,1
?#..???????.?## 2,1,1,3,3
#?.????#?##? 1,7
.??.?##????##?????? 2,5
??????.###?##??? 3,7
????#??????#?.???? 1,11,1,1
?#?#?###?##???#.???. 12,1,1
.#????#?.??????? 1,1,3,2,1
.?#???#####??.#???? 10,1,1,1
??#?.#.?#??#??# 1,1,1,5,1
#??#?????? 1,4,2
????.??.??##?#?.?#? 1,2,1,4,2,1
?.???.??.? 3,1
???##????.???.?? 1,3,1,1,2
??.??#????.?.??# 2,1,2,1,3
.??????#?. 1,2
?..?????#????? 8,1
.??#????????????.? 6,5
??#?.????#? 2,2,1
??#??.#?.??? 1,1,1,1
??#??#??###??? 4,7
??.??#????#?#?.. 8,1
?..???????.?#??? 1,1,2,5
???????.??.#??? 4,1,2,1,1
????????#??.#? 7,1
??#.?????? 2,2
??#????.???## 2,1,5
??.??#?#.##?? 2,4,2
.???.####?#?? 1,7
?.#?????#????## 1,1,10
?#??.###?###???..#? 3,8,1,1
#.?##?????#?##?? 1,4,6
?#.?###???#?#????#? 1,11,1
?##?#????.???. 9,3
???#???????#.?.? 1,1,1,3,1
??????.????#????## 3,1,1,4,1,2
.?#?#?.#???#? 1,1,2,2
?.???.?#?#?????????# 1,1,1,5,1,1
??#.??????? 1,2,3
#?#??.??.?.??#?#?? 3,1,1,6
.?#??#?#??????#?# 5,4,5
.#????##???? 7,1
???##???.?#?.?? 8,2
?#???????.?# 4,1,1
#?#?????.??#???? 1,1,1,1,6
?#??#?????? 4,1
?????#???????#.#? 1,9,1,1
#????.???#???#?#???# 1,1,9,1
??.#??#.?? 1,4
.????.?.??.?.?.#??#? 2,1,1,1,1
?????.?##. 2,3
?.#???##??? 1,4
.#??#???#?? 1,7
?????#?.?.??#???.?.? 6,4
????.?#.?#????? 2,1,3,1
??##?#????#??? 6,3
??????.?#.?.?.?? 1,3,1,1,1
.#??.#?#.. 3,1,1
#?.?#???.????? 1,2,1,2
.??.?.?.?? 1,1,1
??????#??#??..?.? 6,1
?????.??...#?#??#? 2,6
??..???..??.???#???? 2,6
?.????#?????..???? 1,7,1
.?####??#?#??.?#.. 10,2
?.??##.?#? 1,4,2
?#?.??.?????.?. 3,1
?#???###???. 2,4,1
#????#???.#??##???.? 2,5,5,1,1
.??#??????#? 3,3,2
??#.##?#?#? 2,7
?#?.?.???? 2,1,2
??#??.##??????? 1,5,1
?#..??#??#?#?#?..#?? 1,1,9,1
?#??.?????#?#? 3,1,5
??.???#????#..?? 1,9
???????#####?.??. 2,2,6,2
????#???????.? 2,1,1,1
????????#.?#. 1,1,1,2
???.????###?####???? 2,2,8,1
???.#..??#??###? 1,1,1,7
?#???..?.??. 4,1,1
?#?..?????##?#???.?# 2,1,9,1
?.????.?????? 2,3
??#?????????##. 1,5,5
???..??.?.?? 2,1,1,1
#.?#?.#?##???? 1,1,5,1
?#????##.?.???.#??# 5,2,1,2,1,1
?.#.?..?.? 1,1
?#??#?????##?? 2,1,6,1
.#???.?????.. 4,4
.?##??#?#???? 3,2,1,1
#.#.?###???.#?#.?. 1,1,6,1,1,1
???#.##?#????#.?# 2,1,4,4,1
?#???#????.????#?#.? 1,4,1,2,3,1
#??????#??#?.??.##.? 12,2
???#?????.?##??#??? 5,7
.???##????????.#?. 7,4,2
#??.?????.???.?? 2,3,1,1,1
????.??#???? 2,5
?????#??.#.???? 1,2,2,1,4
???#?.???????#? 4,1,3
??.???#???.?#??.? 1,5,1,1
...?##?????.?#???. 3,2
.??##??????#?. 5,3,2
.??##?????????? 3,4,1
#???????.?? 1,4,1
#.???##????.??#??? 1,1,7,1,1,1
???????.#?# 1,3,3
??.?#?#?#.?? 2,1,1,1
????#???##?#?? 4,7
?.##??.?###?#?#? 4,9
????#????#??????# 1,2,8,1
????..???? 2,2
???#?###?.?? 7,1
?#?.??.????# 2,1,2
.??###?#.?.???? 5,1,1,1,1
?#.???????## 1,1,7
#??.??#???#?.?? 2,2,1,2,2
???.???#???????# 2,4,1,2
#?#..?.???????##. 1,1,1,1,6
???.???..? 2,3
.??..???????.??#??.? 6,4
.?#????????#?.?? 1,5
??#??????##?#?#?#.? 3,1,9
?.??#???????#?# 2,9
?????????? 1,7
??##..?.?#??#?#???? 3,1,1,2,1,2
??????.#??? 3,1
#?.??#??#???.??.?#. 2,8,1
??.????#.????#??#? 2,8
???#?#????#?.????? 1,7,2,1,1
????.?.??.??#??. 1,1,2,4
????#?.??? 3,2
..??#?##??.??? 6,1,1,1
??????.????##.?? 3,6
?##?????????#?#?? 4,2,6
??.?#?????????? 2,1
?.???.??.?????#??? 1,2,1,7
.????#????.???#??# 1,7,2,2,1
????.?#?#. 2,1,4
.??.????..??#?#????? 2,7
?.?##?###??#????# 11,2
?#???#?#?????????#? 8,3,1,2
?????.?????##??????? 1,2,7,1
???#????#?.??? 5,1,1,1
?.?????.???##??# 5,2,2,2
?###?????.??????#. 9,1,1,1,1
.???????..##? 5,3
?#??????#..? 1,6
??.#??????.?. 1,1,5,1
.?????.?#??? 1,1,1,1
?#???????????? 1,1,9
#?##???#????????? 1,2,3,1,2
#?.?##????##??# 1,11
?.????.?#????#??? 1,2,8,1
?#.???#??# 1,2,2
.??.????????#??#.? 1,1,2,1,4,1
????.?#.????#.?. 1,1,3
.#?#?.?#??? 4,3,1
?.?????#?? 1,2,2
?????.??????#?? 3,9
???#?#?##??##????.? 7,7
##?#.???.?. 4,2,1
??#??##??#? 1,1,6
##??????#??????#??.# 3,3,4,3,1
??.?#??.#?????????? 4,2,1,2
.?#??##??.?# 1,5,1
??.??#???#???.?.??? 1,7,1,1,2
??.#.?..#?.?#??????? 1,1,1,2,1,4
.#????###?#?.#?.??# 2,8,1,3
.##??#?????.?# 3,3,1,1
##???#???????.? 10,1,1
??????#??.#?..# 7,2,1
#?..??#??????#?#??? 2,15
???????.?#? 1,1,3
.?.?#..?#?##? 1,5
?#??#?.??#???#.????? 1,1,4,2,1,2
???.?#?????# 1,1,3,1
??.????##??.??? 2,3
????.????#??#?#? 2,1,7
#??#????.???#.?? 1,3,1,1,1
?#????????# 3,2,1
.???.?#?.#?.?#. 3,1,2,1
?#??#????. 2,2,2
??.????????#. 1,5,3
.??????????.. 2,4
???.???..#??. 2,2,3
.#????##??# 1,6,1
##???#???????? 2,4,2,2
??????#??##?. 6,4
.?#?##.???#??? 4,2
#.#.#???#..?##? 1,1,1,3,4
?#??..????#? 1,1,2,2
??##????#?##???????# 2,11,2
.?#??.?..?. 3,1
??#???????#?..?.# 1,1,8,1,1
#???##??#?#??.?.? 1,10,1,1
?#??.???.???? 2,1,1,2
???????#??#..???? 6,1,2,1
??????.#?#?##??.#? 1,1,7,1
????#???#?#???#??. 1,1,13
.?????????#?? 1,6
??.?#?.?## 2,2
..?.??##?... 1,3
?.#??.????. 3,3
.?###????#?.????? 9,1
????.###.?? 1,3
.#??????.#?? 5,1
????.?.???.. 2,1,2
?.#????.?#... 4,1
???#??###? 1,1,4
???####?.?? 1,5,2
?.??###?###??#?..#? 5,3,3,2
..?#.????. 2,2
???..??#???? 1,3,1,1
??.???#?.?.????#.?? 5,4
.???????#?##????#?? 1,12
?#?.?##???.?#???? 3,3,3
#?##?#?#?#??.?#.?? 1,6,3,2,1
?####?.?.#??????#?? 5,8
..???????##??.???#?. 11,1,1
??.?##??..????#? 1,3,1,1,3
#???#?...# 1,2,1
#????????. 3,4
?.??.??.##??? 2,4
???.?.##?# 1,4
??????#?#?. 1,4
????????.#?#?..?#??? 6,4,5
??.???#??#???#?? 1,9,1,1
?#?#????.?#?##. 6,4
??#?#?.????#???? 2,2,6,1
?.?.?????#?????#.?? 1,1,1,5,1,1
????.?????????????? 2,1,2,1,1,4
??.?.???.. 1,1,1
.#?.?#???.#?.??? 2,3,1,1
?.??#??#????.??.?? 1,10,1,1
.#.?#???#??.??#??#?? 1,2,1,1,1,3
?.?#???#?? 1,1,4
????#??#.?#?????##?? 5,2,7
?????#?.???#?????? 6,4,1
?.?????.???#????. 1,5
????#????? 3,1
?#.#????#..#?##??#?? 1,6,7,1
?#??#?.??????? 5,1,2,1
??#.?????????#??#.?? 1,1,10,2
?????????.#?..???? 3,1,3
.???..??.??? 1,1,2,1
#??#???.#??.??##?? 4,3,4
#.##??????#???#???? 1,5,7,1
?#??.??.?.?#? 3,1,1,1
#?????#####???? 1,2,9
??#???#?.#???#?????? 3,2,6,3
#????##?.?##???? 1,1,4,3
??..#.#??#. 1,1,4
.?.?##?????????????? 1,8,4
?##???????#?##?#. 4,1,6,1
?#?#????#?##? 8,2
????##????# 4,1,1
????##..?#??????.??? 3,4,2,1
???#?#.?????#?#?.? 4,1,1,4,1
.#?#?????.??#?#??. 7,1,1,1
?.????????.#.?.???? 8,1,1,1
?????????##??? 1,7
???.#??#???#?????? 1,8,3
?#???????????????? 9,1,1
?##?????????.???? 4,1,1,1,1
??????#?#?## 1,1,1,4
?????.#?#??#.?#? 5,6,2
?#?#.?.??# 3,3
????#???.?#?? 3,3
.????#????#.?????. 6,2,1,1
???.?#???.??.?. 1,4
???#?.???.#??.?? 4,1,1,2
??????#?.?.?#?#???? 4,5
.?????????.#??#??. 1,1,2,1,2,1
?#????#???#???????# 8,1,1,3
??..#???#?????????? 1,3,9,1
??#.???????? 1,1,1,2
?????..??##?#???? 2,1,5,1
???#?#???##??#? 1,1,1,4,1
??#?.????? 4,1
????.????????#?. 1,9
?.??##???.??..???.?? 7,1,2,2
.??.??????? 1,1,2
??????#?#?? 8,1
.??????##????? 2,5
?#?.????.?? 2,1
???#???#?? 4,2
.???.?..###??####??? 1,1,10
?#?????????? 4,2
.??#?.??##? 2,3
??####??.??????. 5,2
?.?##?.?.???#? 1,3,5
#?????.?##??.?? 1,4,3,1,1
..?#??#?.????? 4,1
?#????#?.?#?### 1,1,6
??#..#??.? 2,3
?#???##.??#???.# 6,5,1
??#????#?? 3,1
.??.????#????##??? 1,1,2,7
????.#??.?.? 1,1,1,1
.#?##?.???.?#????#?? 1,3,3,2,2
..#..??#??.?##. 1,5,2
?#.???????????.? 1,1,1,4,1
.?##?????#?? 3,6
??..????#.? 1,2,1
????#??#?? 1,2,1
???##??##.? 1,2,2
??????#????.?? 1,3,2
??.?????.??.. 2,3,1
?..#?????????.???? 5,2,1
#.?????#???#?????? 1,5,1,1,1
?????#?.?.#??? 6,3
????.#?.?.?.?###? 1,1,1,1,3
????.?#???.??.???# 1,1,1,1,1,4
.#???.????#??##????? 2,1,10
?.?????#??? 1,6
#??.?#..#???#?? 1,2,1,1,1
???#.?????????##. 4,11
???#.???#???.?.??? 4,2,1,1,2
??#????#??????#??? 6,1,2,2
?.#?#??????? 4,5
.#.?.????? 1,1,1
?##??#?????????..??? 3,7,1,1
????????.?###??#???? 3,3,11
??###??.??? 5,3
????.???????##?#? 1,1,4,3,2
??#.???.????? 1,1,2,1
??#?????#.? 3,2
??#??#???#????....?? 14,2
???##??????##?#. 6,3,1
..???????.??# 4,3
??#?.?.?..???#? 1,2,1,3
..?.????#?.? 1,1,1,2
?????#?????????#? 2,2,7
?#????.#??#? 2,1,2,1
?#?#????.?..??#?#?? 6,6
.??##.????.?#??#?#? 4,3,8
?.#??.?.?. 1,1,1
??#?.??????? 3,6
.#?#?..???###????# 4,11
???#.??#.#???# 3,3,1,1
??????#?????? 1,1,8
#..?????.?##?#??? 1,5,5
##????.??.? 5,2
??##.???????#? 1,2,2,4
?#??.?.??#?. 2,1,1
?????.??#?#????#??. 4,11
??????...??.?#?? 2,1,3
..?##?????????. 3,4
.#??#???..#??.#?.?. 4,3,2,1
??#???#????#?#?????? 1,1,5,3,1,1
#??.???#.#????????? 1,1,1,6,1
????##?????#???#.? 5,8
??#???#?#???# 2,7
??????#?#??? 3,1,1,1
??????.#??##?.????? 2,2,5,2,1
??#?#???#?#??#???.. 10,3
????##??##.????.? 8,1
.?#.??#??. 2,4
#.???###??#???? 1,1,10
???.#?#??..? 2,3,1
.???#???..?.?.?? 7,1,1
??????#???? 1,1,5
?##???##???#????##?? 7,3,3
??#????.?????#????? 1,2,1,1,6,1
???????#.??.???#???? 1,6,1,1,1,3
??????#??#.?.?? 9,1,2
??#.???.#?##? 2,2,5
.??##??????#???? 6,5
.???###.???##??#. 6,1,3,1
??.?.?????? 1,2
??#??.?.#??????? 4,1,1,5
?#????#.?????.??. 7,5,1
?.??#??.?. 1,1,1
??#???#????.?? 8,1
#.???.????.???##?? 1,1,1,1,1,5
.#?#?????????..?##.# 1,1,1,4,2,1
?##.??.?.?#? 3,2,1,2
#.??.?????# 1,6
.?#?#??????##???? 5,3
?.?#?????##? 4,3
?.?.?.?##????????#? 1,12
??.??..??###?. 2,1,4
?..###????#?.?????? 9,1
?????????##????#??# 14,2
?...#?##?.????????.. 1,4,5,2
.??????#?.? 1,4,1
?..???###??.???.## 1,8,1,2
????#?##?#??#????# 1,10,1,1
??????#??##?#??.???. 9,3
?..?#????#?.#?.#? 1,8,2,2
???????.#? 4,1
????##???.? 1,2,2
.##?..#???.?? 3,4,1
???.???????#???????? 1,1,3,3,1,2
?????#??#??#??.???? 1,10,2
..???.?#???.??????? 2,1,2,1,1,3
???#????##??##?? 1,8,4
???#??#???.?????? 9,3
?????.??##?# 1,1,3,1
??#??#???.????. 6,1,4
???##???#?#?? 1,4,4
??#??##??.????#? 6,5
?#??#???##????#?? 5,5,1
???#??#??? 4,1,1
???##???###?.?..??? 5,5,1,1,1
?#?.???.???? 1,1,1,1
#????????. 1,4
#?????.?????###? 3,1,3,5
#???.?#???#??#.#???? 4,3,1,1,5
??.??????#???#?.?? 2,1,1,1,1,2
???#??#??#?? 5,1
???.??...????##?.? 3,2,1,1,2,1
?.???#?????#??? 1,4,1
?.???#?..?? 1,3,1
.?...???.##??? 1,2,2,1
?????#?#.?.# 7,1,1
?????#?????????#??.. 10,3
??????.#???#.????#. 6,5,1,3
??.?????.. 1,2
?????????? 1,1,1
#?#?.??.??.?##??# 3,2,5
#???##??###.???.?.?? 11,3,1,1
??#??#?##?..#?? 1,8,1,1
.?????????#?? 1,1,2,2
?.??#?#?#???#.?.?. 1,8,1,1,1
?????#??##??## 1,11
#.?????#???#..?##.? 1,9,3
?.#???.?#?#?##?#???? 1,1,11
.????#?#?.??#??##.# 6,7,1
.?...??#??.??#??? 5,2
?.?.??.??? 1,1,1
????.?.#?#????.. 3,5
?.?#?.?#??? 2,2,1
.?????#??.?????#?. 2,4,6
????#????????????#? 1,2,6,4
#??#????.?.???. 8,2
??.?#?##?#?# 1,6,1
???#????????? 2,1,1,1
.?#??..???. 3,3
.???.?.?????? 1,1,1,1
?????????#?. 1,2,2
??.?#??.#??? 3,4
???#??#??..? 1,1,2,1
????#??##???.???.?? 9,2
?#?#..#??#? 4,5
???#???#??#?? 5,2,2
#???##?##.#??????.? 3,2,2,4,1
??#??#??#.?.#?##???? 1,4,1,1,7
#??????.??. 1,3,1
#???????.???..????. 8,1,1,1,1
?#?.??#?.??#???#??? 1,1,1,2,4
?##??.?.???# 3,1,1,1
#??###.?????.? 6,2,1,1
.#?.??#?.? 2,3,1
..?#?????????.? 3,7
??.???????#???#? 1,4,8
???##?.????# 1,4,3
.??#?##.#??????#. 2,2,1,3,1
??#??.?#.?##. 5,2,3
??####??.?.?##?.. 6,4
??#????????#?.??# 11,2
??..??..#? 1,1,2
????##????.?..?.#.? 5,2,1,1
?.?#?.#?.? 1,1,1
?.?#?#?#?.?###?? 7,3
?#??##?????# 6,2
?#????????#. 3,2,1,1
???##??#???#?.. 1,2,7
??.??#????#? 1,8
??#??..??? 2,1
?#???????.??.#? 1,1,1,1,2
.????#?????????????# 1,17
????????.?? 1,2,1
?.?##?#?#??.###?. 3,4,3
????..???????? 3,1,1,1
?#????.?.??? 3,1,1,2
???????#????#?????? 2,2,1,1,4,2
.??????.??.??? 3,2,3
.?##??#?.?.#?.?##??. 2,2,2,3
??#?#??#?? 3,2
?#?.?.#?.?##?#?#? 3,1,1,8
#?.#.?##?.???????? 1,1,4,1,6
????????.????#??? 6,6
???????#?#??#? 6,1
.??.##??.??? 1,3,1
??.????#?#???? 8,1
?#?.?#????####????? 1,10
?#..???#?????? 2,1,2,2
.#?#?####??#?.#?#?. 12,3
.?#?.?#.#?# 3,1,3
.#??##?#?#?#???#???# 11,1,1,1,1
.????##?#..??#?.? 8,3
?..???.?#??#?#???. 1,3,6,1
?##.?????? 3,2
??#?????###?? 6,3
?????????#???##?#?? 7,6,2
#????##??##??#??.# 1,1,2,7,1
???#???#????????? 4,8,1
?.??.??.?? 1,1,2
.??#??#?#?????????? 11,1
.##?#?????# 5,1,2
#???????.? 2,4,1
??????.???#??? 1,1,3,2
????????#?. 2,1,3
????##??#??.### 1,8,3
??.?#??###? 1,7
?.?.?.??#??????.? 1,7
#.??.???#? 1,2,1
??.#????????? 1,4,1,1
????????????.#?##??? 9,5
#?#??.??.#.? 1,2,1,1
??###????.????#???? 9,6
???#?????????#?????? 7,4,1
#?.??.?????#. 1,2,3
#??????.?? 5,1,1
?.?#?#?.?#.?.? 1,4,1,1
??.?###?#??#????#? 1,11,2
??.?????.# 1,1,1
???.??#?#?.?????#?#? 1,1,1,1,7
?.??.????#?#??? 1,8
#?..???.???. 2,2,1,1
#???#??#.?.???? 8,3
?.???????.??#???. 5,6
??##?..?.? 5,1,1
..?#?.?##??##????## 1,8,3
?????.?.#??##. 2,5
?#?###..???##????#? 6,5,3
?#???????? 1,1,3
?.?.?.?#?. 1,1,2
???.?.?.??#??.??? 1,3
??.??#???#??#. 2,3,5
??.?#??????.#?.?#.? 2,1,1,3,1,2
#????#??#????. 1,1,7,1
?#?##.?#??????????# 4,2,4,2,1
???.#?????##?###??? 1,1,13
.?#??#?.??#??. 6,2
##??##?..?#??#??. 6,7
#?.?.?????? 1,4
.?.#??.?#? 1,1,1
??#?.#?#?????.. 3,1,3,1
???#.?.?.?##??#?.? 1,1,1,3,1,1
?????#??#? 1,1,2
??##.????. 2,1,2
..##???#?? 2,4
####??#?#??#?#?. 4,1,7
?##?##????#??? 5,4
???#??????#?#?. 6,7
????.?#??#?#.?#??# 1,1,2,3,2,1
????.#????#? 1,1,1,2
?.##...?.????? 2,3
.???#.??#?##?????##. 1,1,1,6,4
..?#????????##?. 5,6
?.#?.#??#? 1,5
.?????.???##??###?. 1,1,11
?.#??#?.?.???#? 1,5,1,1,1
?#??#????.?? 1,1,1,1
????.?#?????##? 4,1,6
???.??#.#? 3,1
??.#??...?.???..? 3,1,2
???????#??#?#?#?? 4,6
??#?#??#?#?##?.?? 7,4
?##??.??#? 3,1,1
?#.?.#?????##??#? 2,1,6,3
#.#????#??#?????? 1,1,1,6,1
??????#??..??????? 2,1
????#?#?..??#??.#. 1,6,1,1,1,1
?#?????.?.?????.##. 5,1,1,1,1,2
??#?#?#????#?#?????? 15,1
.??????.#?? 1,1,1
??????.?????##?.??. 2,5
???#?#..#?#. 3,1,3
.?#??..#?##??. 4,6
???##??.??#?.?????.? 6,3,5
????????????###???? 4,10
?????.#?.?# 4,2,1
??????.##? 2,1,2
.???.???.? 1,1
.??#??#???????#.. 7,2
.?????#??.??????? 8,2,1
?.####?##?? 7,1
..????.???? 2,1,1
??.????????? 1,2,2,3
?.?..?????????? 1,1,3,2
?#??????#.#.?#? 5,1,1,1
??.?.?#???# 1,1,3
?????#.?#?????#?.? 4,8
?#??##?????.?? 2,2,2
?#..?????..?????#?? 2,4,2,1,1,1
.??.??#??#?? 2,5
?????..#..??##. 3,1,3
??##???#?#?.?#???.?? 1,6,2,1,1,1
???#?????#??. 5,1
.????#?#??????? 7,1,3
???#???##.##??.?? 5,2,3,1
.???#?#?#?#??????# 13,2
?#?????????##??? 1,2,3,3,2
??????.?.???### 1,1,1,1,6
.?.????#?#...??#?#? 1,6,1,3
????#??????? 1,4,1
???.??#??.? 1,2,1
.?#??#???.#??# 7,4
??#.?..?##?.?..? 1,4
???.??.#???????? 3,1,1
..?????#?.?.???? 5,3
????###??????#????? 7,10
##??#?#..#?????#?#?? 7,11
????.?#?#???#???#? 2,11
?????#?#?#????#??. 1,9,1,1
.#.?.#??#??#?#?? 1,1,9
???#????.?..?????.. 1,3,1,1,1,2
?????????#?#?.? 1,1,5,1
??#?.??.????..??. 4,1,4,1
.#?#??##???#?# 1,11
.??#??##??#????# 11,2
.?..#??#??.????# 1,1,1,1,3
?#?#????..???. 6,2
?.????????#?##????? 1,2,6,2,3
???..????? 2,1
?#???##???#?#?.? 1,8
???????.?#?#?? 4,3
??#.??.?#??#?? 1,1,5
??#..#???.???????. 1,1,1,1,1,4
??.???.?#??#???. 1,2,6
?????.?#?.## 3,2,2
.?#??????.??.? 6,1
..????#?###???????# 1,14
??#????#?. 4,1
????????.??# 1,1,2
..?.??????????#??#. 1,2,1,1,6
?.?#????.?#????#.? 1,5,6,1
.?..????#???.??.?.? 6,2
?.#???#..#????#??? 1,1,1,6
.??.?.#??????#??? 1,1,1,3,4
?#####???.?#?? 7,2
??.????#?#.????? 1,6,2
????.??##?? 1,5
#???#?#?.#???..##? 1,1,1,2,4,3
?#?#??.#?? 1,2,3
????????.???? 8,1
.#????#??#. 1,6
?????..???#?#????.? 2,1,10
???????????#??.# 2,1,7,1
???#???.??#??##??.?? 4,8,1
??#????????? 3,1,2
#?.?#????##?????? 1,3,9
.????###?....#?. 7,1
#?#?####??#?#.? 9,1,1
.??#??#?###?????? 3,6,1
???#??####????????#. 2,7,1,1,1
????.#??#??.???? 2,1,4,1,1
?.?.?#?..#? 1,1,2
.#?.?#???? 2,4
???.#????#??.?# 1,1,1,3,1
#??#????#???..# 1,3,1,4,1
###.??.##???#??????? 3,1,2,10
????#?###???? 1,7
?#?#.?#????. 3,2,1
.???####??# 1,5,1
.?#??#??.#?? 2,4,3
???..#?#?#??#??.. 1,10
#??.###...#.?#??## 1,3,1,5
???#?.??#???# 3,5
?#??.?#?#.??. 1,1,3,1
???#???.????#?????? 1,4,5,3
.#.#???.??##?#???# 1,1,1,2,2,1
?.???????????# 3,6
??...##.?.?? 1,2,1,1
?#??..#??#?.???#. 1,1,2,1,4
???.???#??. 1,4
????##?????? 7,3
###.#???##.#?#??.? 3,6,3,1
??????????? 2,3
????#.??#? 5,3
???..????#????##??#? 2,1,1,10
??..#.?????? 2,1,3,1
#?????????.?????. 3,1,3,2,1
??.#?#????#??#???? 4,5
????#..??.?#??#? 1,2,1,2,2
?.????????????? 1,8,1
#???#?..????#?#?? 1,1,2,8
.#???###???????#?? 2,11,1
??????.?????##? 3,1,8
?.#???.#?. 2,1,2
???.##???#. 1,2,1
?#?.?#???#? 2,1,3
???.?#?###..?? 1,5,1
????????#?.#? 1,7,1
#??.#?????#. 2,2,4
??????.???# 5,1,1
#.???.??????? 1,2,1,1
????#?????#? 1,5,3
.?#????#.?? 1,1,2
?.#?#??.???#?#? 1,1,1,1,6
?#.????????#???#???? 1,1,3,4,1,1
???#????##?????.##.? 1,2,6,1,2
????#?#.?????.. 5,1
.???????.??## 1,1,2,4
.?.?##?#?.?? 4,1
#????????.?#?#?.?. 1,2,1,2,1,1
?.???????.# 1,5,1
??.??###?##?.?? 1,7,1
??????..?.?? 1,1,1
.?.#.#??.??.??? 1,1,3,1,1
??#???#???#?#??.?# 1,1,6,1
??.?#?#?#??# 7,1
.?..?.#???#??#????. 1,12
?????.##?? 3,4
?????????? 1,2
#?.#??????????#?? 1,1,12
??????????????????? 1,8,1,4
????#???????????.??? 1,1,6,2,1,1
?.#???#????.??.? 6,1,1,1
??#???##?????#?## 3,3,1,5
??????????????.?# 1,4,1,2,2
?..??#???????? 1,11
?.#??.?.??? 1,1,2
?#??#####???#???.??? 16,1
?#????????????.??? 6,4,3
?.???##???###? 4,4
?.?.?????#???? 1,10
??#?..?... 1,2,1
.###?.?#?????? 3,4
??#.???#.?###??? 1,1,4,4,1
?????.##????#.?????# 3,7,2,2
?????###?.?? 3,5,1
???????#????#.?.???# 1,1,9,1,3
#??.?????.##?.?# 3,3,3,2
?.?.??#?.? 1,1,1
?#??#??##?#??????#?? 1,7,1,1,1
?????#.?#?????#.#?#? 1,3,8,4
#?.??.#???????#???#? 1,1,1,1,2,6
.#?.#?.?#.????? 2,1,2,3
??..?#???.???? 1,3,1
##???.?#?#. 3,3
.??#???..?? 2,1,1
..#??..#?. 2,1
?#??#?#?????..?# 2,3,1,1,2
?????#.#??? 3,1,4
??????.?.#??##?.?? 4,5
???#?????#?.?##.?? 1,3,1,2,3,1
???#?.??..?# 1,1,1,1
.#??.?.?????.?.??#?? 3,3,1,5
#?#????#????..#? 4,5,1
????.???????##?? 1,1,7
?????????#????????# 1,1,1,7,2,1
..??#??##??.. 3,4
???????.?.#?.#.? 6,1,1,1,1
.???##.#.#??# 1,3,1,4
.??..??.?..?#?#? 1,2,1,3
???..#?.??##??? 1,2,4
?...??#??#???. 6,1
.???#??..???.???#??? 3,2,5
??????..?.???#??? 1,1,1,1,5
#???.?..?.??? 4,1,2
#???#??.?.???? 1,3,1,3
??????????.?.?# 7,1,1,1
?##???.#???????#?... 5,10
???.???##?????#? 1,1,4,1,1
?.????.???? 4,2
?.????##??.??? 1,5
????.?#??????##?### 1,2,9
?????#?.?????#?? 5,1,4
.?.#?.#?#?.???## 1,2,4,5
##??#??##?? 2,7
??#?###???#???? 7,5
?#???#?#.???????# 3,1,1,6,1
?#?.??????#?????? 3,2,7
????????????....?? 9,1,1
#?.?#?##??## 1,9
????#??###????.?? 1,9,1
??#???????..?? 8,1
?.?#?????#?.? 2,4
??.?.#?.?#?#??#??..? 1,1,1,9,1
??#???????? 4,1
??????????#??.???# 3,6,1,1,2
?????.???? 1,1,2
??#????.#????##??.? 1,1,1,8,1
?..#.#...? 1,1,1
?#?##??#?.????##???# 8,1,4,1
#????#?#?.#??#???? 1,1,5,1,1,2
#?#????.???#.? 1,2,1,2
??????????..? 1,2,4,1
.?##??.?????..??.? 2,4
#??#??????.?.##?.??? 8,1,2,2
#?.???#.##???###?# 2,2,1,2,6
##?#??????..? 4,1,1
?#????????#.#.??.?? 1,1,5,1,1,1
#????.?#....?. 5,2,1
.?#?#???#??? 6,1
?????#??#??? 1,4,4
.??????.????? 3,2
???#.??????. 1,1,1,3
.????#??#???###???? 1,4,4,2
.?##.#????.?# 3,1,1,1
?????#?#??#? 1,9
.???????????.##? 4,2,2
..???#??.?##?#??###? 6,4,3
??#????#.???#?#?##?? 6,1,1,8
..??#?????????? 1,3
?.?#???????? 4,2,1
.?.?#??.#?..?#?#?? 1,4,1,5
??????.#????.#?.? 3,4,2,1
??#??#??.###?. 5,3
..?..??#?#??#??. 1,8
..??..?#???#??.? 2,3,3
??.#???###??.???. 1,3,4,1
??????#?##????#??#?? 11,2
?#?.???##?.#??#? 3,6,2,1
.#?####?.#?#?# 6,1,3
?#.?.????? 1,1,3
??#??#?...???? 5,2
?.?##??##????.? 1,11
?##?????#??#.?? 11,2
??.???#..?#?#???? 1,1,2,2,5
?##??#???##?????#. 2,2,7,1
??#????##?.?. 3,4
??.??#.??.???#?#?? 2,1,1,1,1,6
???#..?#?. 2,1,1
??????####??###???# 1,12,3
????#?##??#.##? 1,1,4,1,2
#.??#??##??#?..?.?# 1,9,1,1
?#???????.??.#?????? 1,2,1,1,7
????.#?????????##? 2,2,7
???.###???#?#?# 1,3,5
???#..???##????? 2,2,2,1,2
.??#???#.. 1,1,1
#?????#????? 1,1,2,1
?.????..?????#? 1,3,3,1
?.???.?#????#??#.#?# 2,9,3
?##.??.##.??.??? 2,2
???#???.?? 2,1,1
?????.?..??#?? 1,1
.???????#..???# 2,2,2
?????##??##? 1,7
???#????##????. 1,2,6
.#?.??.??? 1,1,2
??????.??#?? 1,1,4
#.?????????????##?? 1,2,10
.??????##??.?###??? 7,4
.??##??#??#.?????? 4,4,1,1,1
#??????.?? 1,3,2
??##???#?????#?. 4,2,5
???????..??? 4,3
??#??#??#?? 1,1,2
???.????#?? 2,5,1
??##?????.?. 4,2
????#??#?.#? 4,2,2
?????#??.??. 2,3,1
?.?#?#?#??#???#???.? 13,1
#??#?#??#??.????? 11,2,1
?????#??.? 1,4
?????#..??????#????? 2,2,6,1,1
??#?.?.??????? 4,1,2
?#?????#??????#???? 1,1,4,3,3
?????##.??.??##?? 4,4
.##?.?.#?#?.?#??#??. 3,1,4,6
#???#.#?#?.???#??? 1,3,4,1,4
???.??##?#?#?? 1,9
.#?????.?.?????## 6,1,1,1,3
#?#?????##.#?#??? 1,8,1,1,1
?..#??.?????? 3,1
.#?##??????. 1,4,2
?.???????. 1,2
????..??.????. 3,1,3
#.?##???#????.??.? 1,4,1,2,2,1
??.??.??#????.??? 1,1,5,2
?.??#?.#?. 2,2
??##??.#.??.????? 5,1,2,1,2
#?.?.#??#???#.?.?? 2,1,1,2,2
??#?.?#?.??????? 3,2,3
##?##????????#?. 6,5
?.???#?????.??? 1,5,1,2
????#???.???#?#?.? 6,1,5,1
??#???#.??#?????##? 5,1,10
????.?#??#?????? 1,1,5,1,1
??????####???? 1,8
?.????..?? 1,3,1
??.??##??###?..? 4,5
???#????????? 4,3
.#???.??#. 4,2
????#?.#?????##??? 1,1,1,1,5
?.???.??#??.???? 1,2,3,1,1
.?#?.??##.?? 3,4
??.#.??#.? 1,3,1
???????#..?? 7,2
???????##???.??????? 8,5
?##?##?????.?#?# 7,1,1,1,1
?.??..?.?.?. 1,1,1,1
??????#??.??? 2,4,1
..???#?.##?# 2,2,4
???#???#.??????#?#. 8,1,3
.###????.????. 6,2
????###??#???????? 7,5,3
.#????.???#???????? 5,1,3,3
.???#?#??#?. 1,7
????????#???#..#?? 11,1
#??#.??.#?#?.?? 4,1,1,1,1
???????????????? 6,2
??.#?????. 2,6
?##????#??##? 2,1,2,2
?.#.??##??????#??? 1,4,7
#??.#?????? 2,1,3
??##.???#?? 3,2,1
??#???????..??#. 2,4,3
?..?#.???#???? 2,1,2,1
??.?#??.??#?..??.# 1,1,1,2,2,1
#..???#??? 1,6
?????.?.??.??#?????. 2,1,1,1,3,4
?????????.#? 3,1,1
??#????#?..#.???.??? 3,5,1,1,1,1
???.?#..???#?? 1,2,5
??#??#??#?.#?# 7,3
??#????????#????#??? 1,11,1,1
??#.???????#? 2,4,1
??.?????????# 5,1
.?#?##??#?.#?????? 5,1,1,1,1
??????###??# 1,1,5,1
..????#?.??.??? 5,1,1
???.????### 1,4
???...?#???###???#?? 1,14
????????????#??.#? 1,7,1,1,1,1
????##??.???..#. 1,5,1,1,1
..##??.??##?? 4,6
????#?##???.?? 2,5,1
#??..?#???????????? 2,2,6,2
.?#???#??????? 2,7
??.#.#..????###.? 1,1,1,7,1
.??#.???###.?? 3,4,2
??????#?#.??? 4,3,2
????#?..???##.? 2,2,1,2,1
.?????#?#?? 2,4
#??.????#? 2,4
???..#???#??? 2,7
..????????##. 1,3`

    function parseInput(input) {
        var returnObj = {}
        input.split("\n").map(x => x.split(" ")).forEach((x, i) => {
            returnObj[i] = {
                "conditions": x[0],
                "groups": x[1].split(",").map(y => parseInt(y))
            }
        });
        return returnObj
    }

    // https://stackoverflow.com/a/16155417
    function dec2bin(dec) {
        return (dec >>> 0).toString(2);
    }

    function leftpad(inputString, targetLength, paddingChar) {
        var returnString = inputString;
        if (!paddingChar.length) {
            return console.error("padding char must be at least 1 char long")
        }
        while (returnString.length < targetLength) {
            returnString = paddingChar + returnString
        }
        return returnString
    }

    // https://stackoverflow.com/a/16436975
    function arraysEqual(a, b) {
        if (a === b) return true;
        if (a == null || b == null) return false;
        if (a.length !== b.length) return false;

        // If you don't care about the order of the elements inside
        // the array, you should sort both arrays here.
        // Please note that calling sort on an array will modify that array.
        // you might want to clone your array first.

        for (var i = 0; i < a.length; ++i) {
            if (a[i] !== b[i]) return false;
        }
        return true;
    }

    function doConditionsMatchGroups(inputConditions, inputGroups) {
        var tempConditions = inputConditions
        // replace all repeating periods with single periods
        while (tempConditions.includes("..")) {
            tempConditions = tempConditions.replaceAll("..", ".")
        }
        // remove any leading periods
        if (tempConditions[0] == ".") {
            tempConditions = tempConditions.slice(1)
        }
        // remove any trailing periods
        if (tempConditions[tempConditions.length - 1] == ".") {
            tempConditions = tempConditions.slice(0, tempConditions.length - 1)
        }
        // generate groups
        tempConditions = tempConditions.split(".").map(x => x.length)

        return arraysEqual(inputGroups, tempConditions)
    }

    function generateAllPossibleCombos(inputConditions, inputGroups) {
        var maxBrokenSpringsCount = inputGroups.reduce((a, b) => a + b, 0)
        var knownSpringsCount = inputConditions.replaceAll("?", "").length
        var knownBrokenSpringCount = inputConditions.replaceAll("?", "").replaceAll(".", "").length
        var totalSpringsCount = inputConditions.length
        var unknownSpringsCount = totalSpringsCount - knownSpringsCount
        var unknownBrokenSpringsCount = maxBrokenSpringsCount - knownBrokenSpringCount

        var combosArray = new Set()

        // generate all binary numbers as strings, up to 2^unknownSpringsCount
        // strings to arrays
        // filter to just arrays where the sum == maxBrokenSpringCount
        for (var i = 0; i < (2 ** unknownSpringsCount); i++) {
            var bin = leftpad(dec2bin(i), unknownSpringsCount, "0")
            if (!combosArray.has(bin)){
                bin = bin.split("").map(x => +x)
                var replacementBrokenSpringCount = bin.reduce((a, b) => a + b, 0)
                if (replacementBrokenSpringCount == unknownBrokenSpringsCount) {
                    combosArray.add(bin.join(""))
                    combosArray.add(bin.reverse().join(""))
                }
            }
        }

        combosArray = [...combosArray].map(x => x.split("").map(x => +x))

        var comboConditionsArray = []

        // take combosArray and use it to generate conditions
        // if 0 we replace ? with .
        // if 1 we replace ? with #
        for (var i = 0; i < combosArray.length; i++) {
            var combo = combosArray[i]
            var tempCondition = inputConditions
            for (var j = 0; j < combo.length; j++) {
                tempCondition = tempCondition.replace("?", combo[j] ? "#" : ".")
            }
            comboConditionsArray.push(tempCondition)
        }

        // filter to conditions that validate against the input groups
        comboConditionsArray = comboConditionsArray.filter(x => doConditionsMatchGroups(x, inputGroups))

        return comboConditionsArray
    }

    function countAndSumCombosForAllRows(inputData) {
        var returnSum = 0
        for (var idx in inputData) {
            // console.log(parseInt(idx)+1, "of", Object.keys(inputData).length)
            var record = inputData[idx]
            returnSum += generateAllPossibleCombos(record["conditions"], record["groups"]).length
        }
        return returnSum
    }

    function uncoilSprings() {
        var returnObj = parsedInput

        for (var idx in returnObj) {
            var tempRecord = returnObj[idx]
            var tempConditions = tempRecord["conditions"]
            var tempGroups = tempRecord["groups"]

            tempConditions = (tempConditions + "?").repeat(5)
            tempConditions = tempConditions.slice(0, tempConditions.length - 1)
            tempGroups = Array(5).fill(tempGroups).flat()

            returnObj[idx] = { "conditions": tempConditions, "groups": tempGroups }
        }

        return returnObj
    }


    function solvePuzzle() {
        return countAndSumCombosForAllRows(parsedInput).toString()
    }


    function solvePuzzlePt2() {
        return 0
    }

    function init() {
        document.getElementById("fancyAnswer1").value = solvePuzzle()
        document.getElementById("fancyAnswer2").value = solvePuzzlePt2()
    }

    // globals
    const testing = false
    const parsedInput = parseInput(testing ? testInput : puzzleInput)

    // init
    init();
</script>

</html>